<!DOCTYPE html>
<!-- <html lang="en" xmlns:th="http://www.w3.org/1999/xhtml"> -->
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<link th:href="@{/styles/main.css}" rel="stylesheet" />
<link th:href="@{/styles/gamepage-effect.css}" rel="stylesheet" />
<link th:href="@{/styles/gamepage-button-effect.css}" rel="stylesheet" />
<head>
<meta charset="UTF-8" />
</head>
<body>

<div class="ocean">
  <div class="wave"></div>
  <div class="wave"></div>
</div>

<div style=" padding: 1em 0 0 2em;">
<button type="button" th:if="${bingo_game_id}" th:onclick="|window.location.href='/bingo-game'|" class="btn btn-danger">Reset And Start New Game!!</button>
&emsp;&emsp;&emsp;
</div>
<div class="game-display">
	<div class="left-container">
		<h1 th:if="${setup_game}" th:text="${setup_game}">setup_game</h1>

		New Game is created :
		<div th:if="${bingo_game_id}" th:text="'Game id# ' + ${bingo_game_id}">bingo_game_id</div>
		
	<div th:if="${pdfGenerated==5}">
		<span >We have created slips for all participants.</span><br>
		<span >All Participants' slips pdfs are also generated with us</span><br>
		
		<span >You can view slips by clicking on "View Slips" button next to participant's email id.</span><br>
		
		<span>Would you like to mail Slips to each participant ? Choose one of the below options to continue : </span>
		<br><br>
		<button type="button" th:onclick="|window.location.href='emailandstartbingo'|" class="btn btn-success">Send Slips over Email</button>
		&emsp;&emsp;&emsp;
		<button type="button" th:onclick="|window.location.href='startbingo'|" class="btn btn-success">Don't send slips</button>
		
	</div>
		<br>
		<!-- <button th:if="${show_call_next_button}" type="button" th:onclick="|window.location.href='callNextRandomNumber'|" class="btn btn-info call-number-button">
			Call Next</button> -->
			
		<button th:if="${show_call_next_button}" id="blogLink2" type="button" class="bubbly-button">Call Next</button>	
		
			
		<span class="call-style">
			<span th:text="${bingo_call_number}"></span>
			<span th:text="${bingo_call_value}"></span>
		</span>

		<div class="called_calls">
			<div th:each="count,iterator: ${bingo_done_calls}">
				<span th:text="'Call ' + ${iterator.index+1} + ' :' "></span>
				<span th:text="${count}"></span>
			</div>
		</div>
	</div>
	<div class="right-container">
		<div th:if="${bingo_game_id}">
			<div th:if="${manage_players}">
				<h3>Manage Players</h3>
				<span>You can upload excel if there are many players</span><br>
				<span>Note: Excel can only have emails, Your player will be recongnised using their emails</span><br>
				<a th:href="@{'/'}"
						onclick="window.open(this.href, 'mywin', 'left=20,top=20,width=600,height=600,toolbar=1,resizable=0'); return false;">View Sample Excel</a>
				<br><br>
				<form th:action="@{/gamesetup/uploadFile}" method="post" enctype="multipart/form-data">
					 <div class="form-group">
                        <input type="file" name="file" class="form-control-file">
                    </div>
                    <button type="submit" class="btn btn-primary">Upload File</button>
				</form>
			</div>
			<br><br>
			<h3 th:if="${bingo_user_emails}">Players in Game</h3>
			<div class="user-email-style" th:if="${bingo_user_emails}" th:each="em ,iterator: ${bingo_user_emails}">
				<span th:text="${iterator.index+1} + ': ' "></span>
				<span th:text=" ${em}"></span>
				<a class="slip-link" th:href="@{'/slips/' + ${em}}"
					onclick="window.open(this.href, 'mywin', 'left=20,top=20,width=800,height=700,toolbar=1,resizable=0'); return false;">View Slips</a>
			</div>

			<div th:if="${bingo_game_id==1}">
				<span>Add Players Manually</span>
				<form th:action="@{/gamesetup/uploadFile}" method="post" >
					<div class="form-group" id="parentElement">
						<input type="text" class="form-control name-style" id="usr1" placeholder="Player 1 Name"> <input type="text"
							class="form-control email-style" id="email1" placeholder="Player 1 Email">
					</div>
					<button onclick="addInputLine()" name="addInputLine" class="btn btn-info">
						<i class="fa fa-plus"></i>
					</button>
					<br>
					<br>
					<button type="submit" class="btn btn-info">Add PLayers</button>
				</form>
			</div>
		</div>
	</div>

</div>
<div class="context2">
	<div class='footer' th:include="footer::footer" style="color: white"></div>
</div>
 </body>
 
 <script>

 	var i = 2;
	function addInputLine() {
		console.log(i)
		
		var namenode = document.createElement("input"); // Create an <input> node   
		namenode.classList.add("form-control");
		namenode.classList.add("name-style");
		namenode.setAttribute("id", "usr" + i);
		var placeholder = "Player " + i; 
		namenode.setAttribute("placeholder", placeholder + " Name");
		
		var emailnode = document.createElement("input"); // Create an <input> node   
		emailnode.classList.add("form-control");
		namenode.classList.add("email-style");
		emailnode.setAttribute("id", "email" + i);
		emailnode.setAttribute("placeholder", placeholder + " Email");
		
		document.getElementById("parentElement").appendChild(namenode);
		document.getElementById("parentElement").appendChild(emailnode); // Append it to the parent
		i++;
	}
	</script>
	<script th:src="@{/scripts/button.js}"></script>
</html>
